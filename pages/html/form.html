<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Form</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../css/resetDefaultSettings.css"
    />
    <link rel="stylesheet" type="text/css" href="../css/form.css" />
  </head>
  <body>
    <header>
      <a id="back_button" href="./index.html"></a>
    </header>
    <main>
      <div class="main_content_wrap">
        <div class="main_content">
          <div class="form">
            <div class="form__group field">
              <input type="input"
                class="form__field"
                placeholder="Прізвище"
                name="surname"
                id="surname"
                required
              />
              <label for="surname" class="form__label">Прізвище</label>
              <div id="surname_errors_message">Обов'язкове поле!!!</div>
            </div>
            <div class="form__group field">
              <input
                type="input"
                class="form__field"
                placeholder="Ім'я"
                name="name"
                id="name"
                required
              />
              <label for="name" class="form__label">Ім'я</label>
              <div id="name_errors_message">Обов'язкове поле!!!</div>
            </div>
            <div class="form__group field">
              <input
                type="input"
                class="form__field"
                placeholder="Побатькові"
                name="midleName"
                id="midleName"
                required
              />
              <label for="midleName" class="form__label">Побатькові</label>
              <div id="midleName_errors_message">Обов'язкове поле!!!</div>
            </div>
            <div class="form__group field">
              <input type="date" class="form__field" id="date" required />
              <label for="midleName" class="form__label"></label>
            </div>
            <div class="start_button_wrap">
              <div id="start_button" onclick="justDoIt()">Розпочати</div>
            </div>
          </div>
        </div>
      </div>
    </main>
    <script>
      function justDoIt() {
        const surname = document.getElementById("surname").value;
        const name = document.getElementById("name").value;
        const midleName = document.getElementById("midleName").value;

        const surname_error = document.getElementById("surname_errors_message");
        const name_errors = document.getElementById("name_errors_message");
        const midleName_errors = document.getElementById("midleName_errors_message");
        if (!surname) {
          surname_error.style.opacity = 1;
          name_errors.style.opacity = 0;
          midleName_errors.style.opacity = 0;
          return false;
        }
        if (!name) {
          surname_error.style.opacity = 0;
          name_errors.style.opacity = 1;
          midleName_errors.style.opacity = 0;
          return false;
        }
        if (!midleName) {
          surname_error.style.opacity = 0;
          name_errors.style.opacity = 0;
          midleName_errors.style.opacity = 1;
          return false;
        }
        localStorage.setItem(
          "user",
          JSON.stringify({ surname, name, midleName })
        );
        switch (localStorage.getItem("typeTest")) {
          case "fig":
            document.location.href = "./figures.html";
            break;
          case "wor":
            document.location.href = "./words.html";
            break;
          case "col":
            document.location.href = "./colours.html";
            break;
          case "test":
            document.location.href = "./testForTest.html";
            break;
        }
      }
      // set values if exsists
      const data = JSON.parse(localStorage.getItem("user"));
      console.log(data);
      if (data.surname) document.getElementById("surname").value = data.surname;
      if (data.name) document.getElementById("name").value = data.name;
      if (data.midleName)
        document.getElementById("midleName").value = data.midleName;
      document.getElementById("date").value = new Date()
        .toISOString()
        .slice(0, 10);
    </script>
  </body>
</html>
